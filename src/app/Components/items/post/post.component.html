<div class="card-body post-container" *ngIf="post">
  <div class="d-flex justify-content-between align-items-start mb-3">
    <div class="d-flex align-items-center">
      <img [src]="ownerAvatarUrl || Assets.userDefaultAvatar"
           class="rounded-circle me-2"
           width="40"
           height="40"
           [alt]="post.owner.username + ' avatar'">
      <div>
        <h5 class="card-title mb-0">{{ post.owner.username }}</h5>
        <small class="text-muted">{{ post.date | date:'mediumDate' }}</small>
      </div>
    </div>
    <button class="btn btn-sm btn-outline-secondary">
      <i class="bi bi-three-dots"></i>
    </button>
  </div>

  <p class="card-text mb-3">{{ post.content }}</p>

  <div *ngIf="imageAttachments.length > 0" class="mb-3">
    <div class="position-relative">
      <ngb-carousel *ngIf="imageAttachments.length > 1"
                    [interval]="0"
                    [showNavigationArrows]="true"
                    [showNavigationIndicators]="true">
        <ng-template ngbSlide *ngFor="let img of imageAttachments">
          <img [src]="img.blob | blobUrl"
               class="d-block w-100 rounded"
               style="max-height: 500px; object-fit: contain; background-color: #f8f9fa;">
        </ng-template>
      </ngb-carousel>

      <div *ngIf="imageAttachments.length === 1" class="text-center">
        <img [src]="imageAttachments[0].blob | blobUrl"
             class="img-fluid rounded"
             style="max-height: 500px; max-width: 100%; object-fit: contain;">
      </div>
    </div>
  </div>

  <div *ngIf="otherAttachments.length > 0" class="mb-3">
    <div class="list-group">
      <a *ngFor="let file of otherAttachments"
         [href]="file.blob | blobUrl"
         target="_blank"
         class="list-group-item list-group-item-action d-flex align-items-center">
        <i class="bi me-2" [ngClass]="getFileIcon(file)"></i>
        <span class="flex-grow-1">{{ file.fileName }}</span>
        <small class="text-muted">{{ file.blob.size | fileSize }}</small>
      </a>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center border-top pt-2">
    <div class="d-flex">
      <button class="btn btn-sm btn-link text-decoration-none"
              (click)="toggleLike()"
              [ngClass]="{'text-primary': isLiked}">
        <i class="bi" [ngClass]="isLiked ? 'bi-heart-fill' : 'bi-heart'"></i>
        <span class="ms-1">{{ post.likesCount }}</span>
      </button>

      <button class="btn btn-sm btn-link text-decoration-none ms-3"
              (click)="toggleComments()">
        <i class="bi bi-chat"></i>
        <span class="ms-1">{{ post.commentsCount }}</span>
      </button>
    </div>

    <button class="btn btn-sm btn-link text-decoration-none">
      <i class="bi bi-share"></i>
    </button>
  </div>

  <!-- Секция комментариев (по желанию)
  <div *ngIf="showComments" class="mt-3 border-top pt-3">
    <app-comments [postId]="post.id"></app-comments>
  </div>
  -->
</div>
