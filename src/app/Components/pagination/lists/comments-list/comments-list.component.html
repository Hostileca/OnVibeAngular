<div class="pt-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h5 class="mb-0">Comments</h5>
    <button class="btn btn-sm btn-outline-primary" (click)="toggleCommentForm()">
      <i class="bi bi-plus-circle me-1"></i>Add Comment
    </button>
  </div>

  <form *ngIf="showCommentForm" class="card mb-3" [formGroup]="commentForm">
    <div class="card-body">
      <textarea class="form-control mb-2" rows="3" placeholder="Write your comment..."
                formControlName="content">
      </textarea>
      <div class="d-flex justify-content-end">
        <button class="btn btn-sm btn-outline-secondary me-2"
                (click)="showCommentForm = false">
          Cancel
        </button>
        <button class="btn btn-sm btn-primary" (click)="addComment()">
          Post Comment
        </button>
      </div>
    </div>
  </form>

  <ng-container *ngIf="entities$ | async as comments">
    <div class="list-group" #listContainer>
      <app-comment *ngFor="let comment of comments" [item]="comment"></app-comment>
    </div>

    <div *ngIf="comments.length === 0" class="text-center py-4 text-muted">
      <i class="bi bi-chat-left-text" style="font-size: 2rem;"></i>
      <p class="mt-2 mb-0">No comments yet</p>
    </div>
  </ng-container>
</div>
